<app-menu></app-menu>

<div class="main">
    <div class="container-fluid py-3">
        <div class="row py-2" *ngIf="profileData != null">
            <div class="col-md-12 mx-auto">
                <!-- Profile widget -->
                <div class="bg-white shadow rounded overflow-hidden header-ph">
                    <div class="px-4 pt-0 pb-4 cover container-fluid" [ngStyle]="coverStyle">
                        <button href="#" class="btn btn-dark btn-sm mt-2 btn-float-header"
                            onClick="$('#cover').click()">Changer la photo</button>

                        <span class="mask-header-ph "></span>
                        <input type="file" name="cover" id="cover" (change)="onCoverChange($event)" />
                        <div class="media align-items-end profile-head">
                            <div class="profile mr-3"><img src="{{endPoint+profileData.profil}}" alt="..." width="130"
                                    class="rounded mb-2 img-thumbnail">
                                <button href="#" class="btn btn-outline-dark btn-sm btn-block"
                                    onClick="$('#profil').click()">Changer</button>
                                <input type="file" name="profil" (change)="onProfilChange($event)" id="profil" />
                            </div>
                            <div class="media-body mb-5 text-white">
                                <!-- <h4 class="mt-0 mb-0">Mark Williams</h4>
                                <p class="small mb-4"> <i
                                        class="fas fa-map-marker-alt mr-2"></i>New York</p> -->
                            </div>
                        </div>
                    </div>
                </div>

            </div>
        </div>

        <div class="pr-1 pl-1">
            <mat-progress-bar mode="indeterminate" *ngIf="profileData == null"></mat-progress-bar>
        </div>
        <div class="row mt-4 pt-5" *ngIf="profileData != null">
            <div class="col-sm-12">
                <div class="card">
                    <div class="card-header">
                        <h3>A propos</h3>
                    </div>
                    <div class="card-body">
                        <div class="row align-items-center">
                            <div class="col-sm-9">
                                <h6 class="text-muted my-1">Nom : <span
                                        class="text-dark">{{ profileData.username|uppercase}}
                                        {{profileData.firstname|titlecase}}</span></h6>
                            </div>
                            <div class="col-sm-3">
                                <button class="btn btn-sm btn-dark float-right" (click)="setStateNom()"
                                    *ngIf="!stateNom">Modifier</button>
                            </div>
                        </div>

                        <div class="row justify-content-center" *ngIf="stateNom">
                            <div class="col-sm-3">
                                <input type="text" class="form-control form-control-sm"
                                    placeholder="changer votre nom ici..." [(ngModel)]="profileData.username" />
                            </div>
                            <div class="col-sm-3">
                                <input type="text" class="form-control form-control-sm"
                                    placeholder="changer votre prenom ici..." [(ngModel)]="profileData.firstname" />
                            </div>
                            <div class="col-sm-3">
                                <div class="btn-group">
                                    <button class="btn btn-sm btn-dark" (click)="updateNom()">Enregistré</button>
                                    <button type="button" class="btn btn-sm btn-outline-dark"
                                        (click)="setStateNom()">Annuler</button>
                                </div>
                            </div>
                        </div>
                        <hr />
                        <div class="row align-items-center">
                            <div class="col-sm-9">
                                <h6 class="text-muted my-1">Appelation : <span class="text-dark">{{ profileData.nickname|titlecase}}</span></h6>
                            </div>
                            <div class="col-sm-3">
                                <button class="btn btn-sm btn-dark float-right" (click)="setStateNickname()"
                                    *ngIf="!stateNickname">Modifier</button>
                            </div>
                        </div>

                        <div class="row justify-content-center" *ngIf="stateNickname">
                            <div class="col-sm-6">
                                <input type="text" class="form-control form-control-sm"
                                    placeholder="changer votre appellation ici..." [(ngModel)]="profileData.nickname" />
                            </div>
                            <div class="col-sm-3">
                                <div class="btn-group">
                                    <button class="btn btn-sm btn-dark" (click)="updateNickname()">Enregistré</button>
                                    <button type="button" class="btn btn-sm btn-outline-dark"
                                        (click)="setStateNickname()">Annuler</button>
                                </div>
                            </div>
                        </div>
                        <hr />
                        <h6 class="text-muted">Date de naissance : <span
                                class="text-dark">{{profileData.birth|date:'dd MMM, yyyy'}}</span></h6>
                        <hr />
                        <h6 class="text-muted">Numero : <span class="text-dark">+261
                                {{profileData.number}}</span> </h6>
                        <hr />
                        <h6 class="text-muted">Email : <span class="text-dark">{{profileData.email|titlecase}}</span>
                        </h6>
                        <hr />
                        <h6 class="text-muted">Adresse : <span class="text-dark">{{profileData.adress|titlecase}}</span>
                        </h6>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>